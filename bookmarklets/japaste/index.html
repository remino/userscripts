<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
		<title>Japaste Playground</title>
		<link rel="stylesheet" href="https://unpkg.com/semcss/dist/sem.css" />
		<style>
			:root {
				--sc-mw: 20rem;
			}

			label:has(input:nth-of-type(2)) input {
				width: 6rem;
			}
		</style>
	</head>
	<body>
		<h1>Japaste</h1>
		<details>
			<summary>Details</summary>
			<nav>
				Bookmarklet:<br />
				<a
					role="button"
					href="javascript:void(function()%7B%22use%20strict%22;const%20n=(e=document)=%3E%7Blet%20t=e.activeElement;return%20t=%22IFRAME%22===t.tagName?n(t.contentDocument):t%7D;const%20s=n,c=e=%3Ee.split(%22%22).map(e=%3E%7Bvar%20t=e.charCodeAt(0);return%2065281%3C=t&&t%3C=65374?String.fromCharCode(t-65248):e%7D).join(%22%22),l=e=%3Ee.split(%22%22).map(e=%3E%7Bvar%20t=e.charCodeAt(0);return%2033%3C=t&&t%3C=126?String.fromCharCode(t+65248):e%7D).join(%22%22);!function%20t()%7Bconst%20a=e=%3E%7Bconsole.error(%60%5B$%7Bt.name%7D%5D%20%60+e),alert(%22%22+e)%7D,i=(n,...e)=%3Ee.reduce((e,t)=%3E(e%5B1%5D.push(n.slice(e%5B0%5D,t)),e%5B0%5D=t,e),%5B0,%5B%5D%5D)%5B1%5D;(async()=%3E%7Bvar%20e,n=await(async()=%3E%7Btry%7Breturn%20navigator.clipboard.readText()%7Dcatch(e)%7Breturn%20console.error(e),%22%22%7D%7D)();if(n)%7Bconst%20r=(e=%3E%7Bconst%20t=c(e.replace(/%5B%5E0-9%EF%BC%90-%EF%BC%99%5D/g,%22%22));return%207===t.length?i(t,3,7):t.startsWith(%2203%22)%7C%7Ct.startsWith(%2206%22)?i(t,2,6,10):i(t,3,7,11)%7D)(n);if(r.length%7C%7Cr%5B0%5D)%7Blet%20t=s();if(%22INPUT%22!==(t=t&&%22INPUT%22===t.tagName?t:(e=r.join(%22-%22),await%20new%20Promise((t,n)=%3E%7Btry%7Bconst%20r=document.createElement(%22style%22),o=(r.textContent=%22*%20%7B%20cursor:%20crosshair%20!important;%20%7D%22,document.createElement(%22div%22)),a=(o.style.cssText=%60%0A%09%09%09%09all:%20initial;%0A%09%09%09%09background:%20Canvas;%0A%09%09%09%09border-sizing:%20border-box;%0A%09%09%09%09bottom:%2014px;%0A%09%09%09%09border:%20solid%201px%20CanvasText;%0A%09%09%09%09border-radius:%204px;%0A%09%09%09%09color:%20CanvasText;%0A%09%09%09%09font-family:%20sans-serif;%0A%09%09%09%09font-size:%2016px;%0A%09%09%09%09left:%2050vw;%0A%09%09%09%09padding:%2010px%2020px;%0A%09%09%09%09pointer-events:%20none;%0A%09%09%09%09position:%20fixed;%0A%09%09%09%09transform:%20translateX(-50%25);%0A%09%09%09%09z-index:%20999999;%0A%09%09%09%60,o.innerHTML=%60Click%20on%20an%20input%20field%20to%20paste%20%3Cstrong%3E$%7Be%7D%3C/strong%3E%60,document.head.appendChild(r),document.body.appendChild(o),e=%3E%7Be.preventDefault(),e.stopPropagation(),document.removeEventListener(%22click%22,a,!0),document.head.removeChild(r),document.body.removeChild(o),t(e.target)%7D);document.addEventListener(%22click%22,a,!0)%7Dcatch(e)%7Bn(e)%7D%7D))).tagName)a(%22No%20input%20field%20selected.%22);else%7Bvar%20n=t.value.trim();for(c(n)!==r%5B0%5D%7C%7C(e=%3E%7Be=e.charCodeAt(0);return%2065281%3C=e&&e%3C=65374%7D)(n)%7C%7Cr.forEach((e,t)=%3E%7Br%5Bt%5D=l(e)%7D);t&&r.length&&r%5B0%5D.length;)%7Blet%20e;if(t.value=r.shift(),!(e=r.length?(e=%3E%7Bvar%20t=e%5B%22form%22%5D;const%20n=Array.from(t.elements);t=n.indexOf(e);if(-1%3Ct&&t%3Cn.length-1)%7Be=n%5Bt+1%5D;if(%22INPUT%22===e.tagName)return%20e%7Dreturn%20null%7D)(t):e))break;t=e%7Dconst%20o=t%5B%22form%22%5D;o&&(n=new%20Event(%22change%22,%7Bbubbles:!0%7D),o.dispatchEvent(n))%7D%7Delse%20a(%22There%20is%20no%20number%20to%20paste%20in%20the%20clipboard.%22)%7Delse%20a(%22Failed%20to%20read%20clipboard.%22)%7D)()%7D()%7D())"
					>Japaste</a
				>
			</nav>
			<p>
				Japanese Web design is… unique. The UX may be functional but is often
				frustrating. I was tired of them always making me break my phone number
				or postal code into multiple fields, so I made a bookmarklet out of it.
			</p>
			<p>
				To install the bookmarklet, simply drag the button above into your
				bookmarks. Once you have it installed, you can test its functionality on
				this page.
			</p>
			<p>
				If you just want a demo of what it does, there is a
				<a href="https://codepen.io/remino/pen/ZEdXyGK" target="_blank"
					>proof of concept</a
				>
				on CodePen which works without a bookmarklet.
			</p>
			<p>By <a href="https://remino.net/" target="_blank">RÉMINO</a></p>
		</details>
		<form>
			<h2>Phone Number</h2>
			<label>
				<span>Phone number in 1 field</span>
				<input value="080-５５５５-1234" readonly />
			</label>
			<label>
				<span>Phone number in 3 fields</span>
				<input maxlength="3" required pattern="[0-9０-９]{3}" />
				<input maxlength="4" required pattern="[0-9０-９]{4}" />
				<input maxlength="4" required pattern="[0-9０-９]{4}" />
			</label>
			<h2>Postal Code</h2>
			<label>
				<span>Postal code in 1 field</span>
				<input value="１５１-0001" readonly />
			</label>
			<label>
				<span>Postal code in 2 fields</span>
				<input maxlength="3" required pattern="[0-9０-９]{3}" />
				<input maxlength="4" required pattern="[0-9０-９]{4}" />
			</label>
			<button type="reset">Reset</button>
			<button type="submit" disabled>Submit</button>
		</form>
		<script>
			// disable submit on form
			;(function () {
				const form = document.querySelector('form')

				const applyValidity = () => {
					const submit = form.querySelector('button[type="submit"]')
					submit.disabled = !form.checkValidity()
				}

				form.addEventListener('submit', e => {
					e.preventDefault()
					e.stopPropagation()
				})

				form.addEventListener('input', applyValidity)
				form.addEventListener('change', applyValidity)
				form.addEventListener('reset', () => setTimeout(applyValidity, 10))
			})()
		</script>
	</body>
</html>
